{% extends 'base.html' %}
{% block title %}カレンダー{% endblock %}
{% block content %}
<h1>{{ year }}年{{ month }}月</h1>
<div class="calendar-nav">
  <a href="{{ url_for('calendar_view', year=prev_year, month=prev_month) }}">&laquo; 前月</a> |
  <a href="{{ url_for('calendar_view', year=next_year, month=next_month) }}">翌月 &raquo;</a>
</div>
<table class="calendar">
  <tr>
    <th>日</th>
    <th>月</th>
    <th>火</th>
    <th>水</th>
    <th>木</th>
    <th>金</th>
    <th>土</th>
  </tr>
  {% for week in days %}
  <tr>
      {% for day in week %}
      {% set date_str = day.strftime('%Y-%m-%d') %}
      <td class="{% if day.month != month %}other-month {% endif %}{% if day == today %}today {% endif %}{% if events.get(date_str) %}has-event{% endif %}" data-date="{{ date_str }}">
        <div class="date-number"><a href="#" class="day-link">{{ day.day }}</a></div>
        {% set day_events = events.get(date_str, []) %}
        {% if day_events %}
        <ul class="events">
          {% for name in day_events %}
          <li>{{ name }}</li>
          {% endfor %}
        </ul>
        {% endif %}
      </td>
      {% endfor %}
  </tr>
  {% endfor %}
</table>
{% endblock %}
